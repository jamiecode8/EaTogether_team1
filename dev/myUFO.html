<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge" />
	<meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
	@@include('layout/style.html')
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.2/animate.min.css">
	<title>我的飛碟</title>
	<link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />

</head>
<body class="myUFO_wrapper">
	@@include('layout/header.html')

  <div class="wrapper myUFO_wrapper2">
    <div class="myUFO_bg">
     <div class="figure"><img src="./img/mimi/Backgroundimage.png" alt="#"  /></div>
     <div class="figure2"><img src="./img/mimi/Backgroundimage2.png" alt="#"  /></div>
     <div class="figure3"><img src="./img/mimi/Backgroundimaipad.png" alt="#" ></div>
     <div class="figure4"><img src="./img/mimi/Backgroundimage_phone2.png" alt="#" ></div>
     </div>  
     <div class="object">
     <!--窗戶-->
     <div class="window1">
         <img src="./img/mimi/window.svg" alt=""  />
     </div>
     <!--點數-->
     <!-- <div class="Points1">
     <img src="./img/mimi/Points.svg" alt="" />
     <p>8888</p>
     </div> -->
  

     <!-- 燈 -->
     <div class="light"><img src="./img/mimi/light.svg" alt="" ></div>   
     <!-- 收藏店家   -->
     <div class="favorites"><a href="#" ><img src="./img/mimi/favorites.svg" alt="" class="hover-button" id="Favoritesbox"/></a></div>
     <!-- 櫃子 -->
     <div class="cabinet"><a href="#" ><img src="./img/mimi/cabinet.svg" alt="" class="hover-button" id="category"/></a></div>
     <!-- 輪播版 -->
     <div class="Carousel"><img src="./img/mimi/myUFO_TV_1.png" alt=""  /></div>
     <!---輪播----->
        <!-- Swiper -->
     
        <div class="slideshow-body" id="slideshow">
         <div class="slide-wrapper">
           <div class="slide"><a href="#"><img src="./img/mimi/fr_b1.png" alt=""></a></div>
           <div class="slide"><a href="#"><img src="./img/mimi/fr_c1.png" alt=""></a></div>
           <div class="slide"><a href="#"><img src="./img/mimi/fr_b1.png" alt=""></a></div>
           <div class="slide"><a href="#"><img src="./img/mimi/fr_a1.png" alt=""></a></div>
          
         </div>
       </div>
                  
     <!-- 外星人   -->
     <div class="Speech_circle" ><img src="./img/mimi/Speech_circle.svg" alt=""></div>
     <div class="character" ><a href="#"><img src="./img/mimi/alienTest.png" alt="" class="animated pulse infinite delay-4s" style=" -webkit-filter: brightness(80%) grayscale(100%); "/></a></div>
     
 
 
 <!-- --------收藏餐廳彈窗-------- -->
 <div class="popUps myCollection_pop" id="app_collection">
  <form class="form getMyCollection" action="">
    <button class="getMyCollectionClose btn_close" >
      <img src="./img/icon/icon_close_20.png" alt="">
    </button>
    <h1>收藏店家</h1>
    <div class="myStores">
      <div class="getMyStores" v-for="collection in myStores">
        <img class="heartButton" src="./img/icon/icon_heart.png" alt="" @click="removFavorite(collection)">
        <ul class="getMyStoresInf">
          <li class="myStoreName">
            <h2>{{collection.store_name}}</h2>
          </li>
          <li class="getStoreInf_star">
            <div v-for="star in 4"><img src="./img/icon/icon_star.png" alt=""></div>
            <div v-for="darkStar in 1"><img src="./img/icon/icon_star_default.png" alt=""></div>
          </li>
          <li class="getStoreInf_station">
            <p>捷運站:{{collection.station_name}}站</p>
          </li>
          <li class="getStoreInf_tag">
            <span>{{collection.store_tag1}}</span>
            <span>{{collection.store_tag2}}</span>
            <span>{{collection.store_tag3}}</span>
          </li>
        </ul>
        <img class="myStorePic" :src="[`./img/upload/food/`+collection.store_img]" alt="">
      </div>

    </div> <!-- 後端要抓全部total筆數 -->
    <!-- <p class="searchTotal">收藏<span> {{myStores.length}} </span>筆</p> -->
  </form>
</div>



 <!-- -------總分類彈窗----------- -->
 <div class="popUps myUFOcategory" id="myUFO_category">
     
     <form action="#資料傳送送的網址" method="post" class="form categorform" >
       <!-- close button -->
       <button type="button" class="close_categor btn_close">
         <img src="./img/icon/icon_close.png" alt="" >
       </button>
        <h1>小櫃子</h1>
       <!-- 主標題 -->
       <div class="categoricon"><img src="./img/mimi/category2.svg" alt="" class="categorimg"></div>
        <!-- 優惠券 -->
         <div class="coupon" ><a href="#" id="coupon_wardrobe" ><img src="./img/mimi/coupon.svg" alt="" class="hover-button" >
         <h1>優惠卷</h1></a></div>
         <!-- 小遊戲 -->
         <div class="game"><a href="#"><img src="./img/mimi/game.svg" alt="" class="hover-button"><h1>小遊戲</h1></a></div>
         <!-- 照片 -->
         <div class="Smallphoto"><a href="./myphoto.html"><img src="./img/mimi/Smallphoto.svg" alt="" class="hover-button"><h1>照片牆</h1></a></div>
         <!-- 任務 -->
         <div class="Smalltask"><a href="#" id="Smalltask_wardrobe"><img src="./img/mimi/task.svg" alt=""  class="hover-button"><h1>每日任務</h1></a></div>
     </form>
     
   </div>

 <!-- -----------------------優惠券彈窗------------------------------------- -->  
 <div class="popUps" id="wardrobe_coupon">
     <form action="#資料傳送送的網址" method="post" class="form">
       <!-- close button -->
       <button type="button" class="close_coupon btn_close">
         <img src="./img/icon/icon_close.png" alt="" >
       </button>
        <h1>每日優惠卷一張</h1>
       <!-- 主標題 -->
       <div class="couponicon"><img src="./img/mimi/couponicon.svg" alt="" ></div>
       <!-- 單顆按鈕用這裡 -->
       <div class="buttonArea">
         <a href="#"><div class="buybtn" id="couponbut2">兌換優惠券</div></a>
       </div>
     </form>
   </div>

   <div class="popUps" id="wardrobe_coupon2">
     <form action="#資料傳送送的網址" method="post" class="form">
       <!-- close button -->
       <button type="button" class="close_coupon btn_close">
         <img src="./img/icon/icon_close.png" alt="" >
       </button>
        <h1>每日優惠卷一張</h1>
       <!-- 主標題 -->
       <h2>請給店員操作</h2>
       <!-- 單顆按鈕用這裡 -->
       <div class="buttonArea">
         <a href="#"><div class="buybtn22">兌換優惠券</div></a>
       </div>
     </form>
   </div>
   <!-- -----------------------每日任務彈窗----------------------------- -->
   <div class="popUps" id="wardrobe_Smalltask">
     <form action="#資料傳送送的網址" method="post" class="form formSmalltask"> 
       <!-- close button -->
       <button type="button" class="close_coupon btn_close">
         <img src="./img/icon/icon_close.png" alt="">
       </button>
     
       <!-- 主標題 -->
       <h1 >
         每日任務 
       </h1>
       <div>
           <div class="Smalltaskbox1">
               <!-- --1-- -->
               <div class="Littleman"><img src="./img/mimi/Littleman.svg" alt="" ></div>
               <!-- --2---- -->
             <div class="progressmimi">
               <p class="Smalltask_p">每日小遊戲</p>
               <div class="progress_bar">
                 <!-- <progress max="100" value="0" class="more1"></progress> -->
                 
                 <button type="button" id="more1" class="myUFO_button buybtn1">兌換</button>
                 </div>
             </div>
             
           </div>
       <div class="Smalltaskbox2">
         <!-- --1-- -->
         <div class="mrtSmalltask"><img src="./img/icon/icon_mrtBlue.png" alt="" ></div>
         <!-- --2---- -->
       <div class="progressmimi">
         <p class="Smalltask_p">藍線搜尋一次</p>
         <div class="progress_bar">
           <!-- <progress max="100" value="0" class="more2"></progress> -->
           
         <button type="button" id="more2" class="myUFO_button buybtn2">兌換</button>
         </div>
       </div>
         <!-- --3-- -->
     </div>
     <div class="Smalltaskbox3">
       <!-- --1-- -->
       <div class="mrtSmalltask"><img src="./img/icon/icon_mrtBrown.png" alt="" ></div>
       <!-- --2---- -->
     <div class="progressmimi">
       <p class="Smalltask_p">綜線搜尋一次</p>
       <div class="progress_bar">
         <!-- <progress max="100" value="0" class="more3"></progress> -->
           
         <button type="button" id="more3" class="myUFO_button buybtn3">兌換</button>
       </div>
     </div>
    
   </div>
   <div class="Smalltaskbox4">
     <!-- --1-- -->
     <div class="mrtSmalltask"><img src="./img/icon/icon_mrtGreen.png" alt="" ></div>
     <!-- --2---- -->
   <div class="progressmimi">
     <p class="Smalltask_p">綠線搜尋一次</p>
     <div class="progress_bar">
       <!-- <progress max="100" value="0" class="more4"></progress> -->
           
       <button type="button" id="more4" class="myUFO_button buybtn4">兌換</button>
     </div>
   </div>

 </div>
 <div class="Smalltaskbox5">
   <!-- --1-- -->
   <div class="mrtSmalltask"><img src="./img/icon/icon_mrtRed.png" alt="" ></div>
   <!-- --2---- -->
 <div class="progressmimi">
   <p class="Smalltask_p">紅線搜尋一次</p>
   <div class="progress_bar">
     <!-- <progress max="100" value="0" class="more5"></progress> -->
         
     <button type="button" id="more5" class="myUFO_button buybtn5">兌換</button>
   </div>
 </div>

</div>
<div class="Smalltaskbox6">
 <!-- --1-- -->
 <div class="mrtSmalltask"><img src="./img/icon/icon_mrtYellow.png" alt="" ></div>
 <!-- --2---- -->
<div class="progressmimi">
 <p class="Smalltask_p">橘線搜尋一次</p>
 <div class="progress_bar">
   <!-- <progress max="100" value="0" class="more6"></progress> -->
   <button type="button" id="more6" class="myUFO_button buybtn6">兌換</button>
 </div>
</div>

</div>
       </div>   

     </form>
   </div>
 
   <script>
     $('#Smalltask_wardrobe').click(function(){
         $('#wardrobe_Smalltask').css('display' , 'block').fadeIn(100);
             console.log('click ok');
             })
            // 關閉彈窗
     $('.btn_close').click(function(){
         $('#wardrobe_Smalltask').fadeOut(200);
         });

     moveProgressBar();

      $(window).resize(function() {
         moveProgressBar();
         });

     function moveProgressBar() {
       console.log("moveProgressBar");
         var getPercent = ($('.progress-wrap').data('progress-percent') / 100);
         var getProgressWrapWidth = $('.progress-wrap').width();
         var progressTotal = getPercent * getProgressWrapWidth;
         var animationLength = 2500;

     $('.progress-bar').stop().animate({
         left: progressTotal
         }, animationLength);
     }

     moveProgressBar();

         $(window).resize(function() {
             moveProgressBar();
             });

                 function moveProgressBar() {
                 console.log("moveProgressBar");
                     var getPercent = ($('.progress-wrap').data('progress-percent') / 100);
                     var getProgressWrapWidth = $('.progress-wrap').width();
                     var progressTotal = getPercent * getProgressWrapWidth;
                     var animationLength = 2500;

                         $('.progress-bar').stop().animate({
                             left: progressTotal
                             }, animationLength);
         }

 </script>  
        <!-- -------總分類彈窗----------- -->
        <div class="popUps myUFOprogressbar" id="myUFOprogressbar">
     
         <form action="#資料傳送送的網址" method="post" class="form categorform" >
           <!-- close button -->
           <button type="button" class="close_myUFOprogressbar btn_close">
             <img src="./img/icon/icon_close.png" alt="" >
           </button>
            <h1 class="categor_h1">已領取點數10點!</h1>
           
         </form>
         
       </div>

			<!-- ----------靜瑩角色彈窗---------- -->
			<div class="popUps MyCharacter">
				<div action="" class="form getCharacter">

					<button type="button" class="getCharacterClose btn_close">
						<img src="./img/icon/icon_close.png" alt="" />
					</button>

					
					<div class="MyCharacter_for_web">
						<div class="getCharacter_alien">
							<!-- 所選的角色身體顯示 -->
							<h1>我的外食星人</h1>
							<div id="MyCharacter_canvas">
								<!-- MyCharacter_body -->
                <!-- <img class="MyCharacter_body" :src="''./img/MyUFO_Alien/body'+ MyCharacter_body +'.png'"> -->
								<img class="MyCharacter_body" v-if="MyCharacter_body == 1" src="./img/MyUFO_Alien/body1.png">
								<img class="MyCharacter_body" v-if="MyCharacter_body == 2" src="./img/MyUFO_Alien/body2.png">
								<img class="MyCharacter_body" v-if="MyCharacter_body == 3" src="./img/MyUFO_Alien/body3.png">
								<img class="MyCharacter_body" v-if="MyCharacter_body == 4" src="./img/MyUFO_Alien/body4.png">
								<img class="MyCharacter_body" v-if="MyCharacter_body == 5" src="./img/MyUFO_Alien/body5.png">
								<img class="MyCharacter_body" v-if="MyCharacter_body == 6" src="./img/MyUFO_Alien/body6.png">
								<!-- MyCharacter_eyes -->
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 1" src="./img/MyUFO_Alien/eye1.png">
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 2" src="./img/MyUFO_Alien/eye2.png">
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 3" src="./img/MyUFO_Alien/eye3.png">
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 4" src="./img/MyUFO_Alien/eye4.png">
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 5" src="./img/MyUFO_Alien/eye5.png">
								<img class="MyCharacter_eye" v-if="MyCharacter_eye == 6" src="./img/MyUFO_Alien/eye6.png">
								<!-- MyCharacter_mouth -->
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 1" src="./img/MyUFO_Alien/mouth1.png">
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 2" src="./img/MyUFO_Alien/mouth2.png">
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 3" src="./img/MyUFO_Alien/mouth3.png">
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 4" src="./img/MyUFO_Alien/mouth4.png">
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 5" src="./img/MyUFO_Alien/mouth5.png">
								<img class="MyCharacter_mouth" v-if="MyCharacter_mouth == 6" src="./img/MyUFO_Alien/mouth6.png">
							</div>
              				<!-- 桌機版的button -->
							<div class="btn getCharacterBtn_web">
                <button onclick="screenshot()">
                  送出
                </button>
									<!-- <a href="./myUFO_wardrobe.html" > -->
										<!-- <input type="" value="送出" class="btn_submit getMyCharacter" disabled/> -->
									<!-- </a> -->
               
							</div>
						</div>
						<div class="getCharacter_choice">
							<div class="getCharacter_choiceList">
								<div class="choiceList_body" @click="getCharacter_choiceList = 1">
									<p  @click="selected = 1" :class="{active:selected == 1}">身體</p>
									<!-- <p @click="e => e.target.classList.toggle('active')">身體</p> -->
								</div>
								<div class="choiceList_eye" @click="getCharacter_choiceList = 2">
									<p @click="selected = 2" :class="{active:selected == 2}">眼睛</p>
									<!-- <p @click="e => e.target.classList.toggle('active')">眼睛</p> -->
								</div>
								<div class="choiceList_mouth" @click="getCharacter_choiceList = 3">
									<p @click="selected = 3" :class="{active:selected == 3}">嘴巴</p>
									<!-- <p @click="e => e.target.classList.toggle('active')">嘴巴</p> -->
								</div>
							</div>
							<div class="choiceOrgan myBody" v-if="getCharacter_choiceList == 1">
								<ul class="alienBody">
									<li @click="MyCharacter_body = 1"><img src="./img/MyUFO_Alien/body1_option.png" alt=""></li>
									<li @click="MyCharacter_body = 2"><img src="./img/MyUFO_Alien/body2_option.png" alt=""></li>
									<li @click="MyCharacter_body = 3"><img src="./img/MyUFO_Alien/body3_option.png" alt=""></li>
								</ul>
								<ul class="alienBody">
									<li @click="MyCharacter_body = 4"><img src="./img/MyUFO_Alien/body4_option.png" alt=""></li>
									<li @click="MyCharacter_body = 5"><img src="./img/MyUFO_Alien/body5_option.png" alt=""></li>
									<li @click="MyCharacter_body = 6"><img src="./img/MyUFO_Alien/body6_option.png" alt=""></li>
								</ul>
							</div>
							<div class="choiceOrgan myEye" v-if="getCharacter_choiceList == 2">
								<ul class="alienEye">
									<li @click="MyCharacter_eye = 1"><img src="./img/MyUFO_Alien/eye1_option.png" alt=""></li>
									<li @click="MyCharacter_eye = 2"><img src="./img/MyUFO_Alien/eye2_option.png" alt=""></li>
									<li @click="MyCharacter_eye = 3"><img src="./img/MyUFO_Alien/eye3_option.png" alt=""></li>
								</ul>
								<ul class="alienEye">
									<li @click="MyCharacter_eye = 4"><img src="./img/MyUFO_Alien/eye4_option.png" alt=""></li>
									<li @click="MyCharacter_eye = 5"><img src="./img/MyUFO_Alien/eye5_option.png" alt=""></li>
									<li @click="MyCharacter_eye = 6"><img src="./img/MyUFO_Alien/eye6_option.png" alt=""></li>
								</ul>
							</div>
							<div class="choiceOrgan myMouth" v-if="getCharacter_choiceList == 3">
								<ul class="alienMouth">
									<li @click="MyCharacter_mouth = 1"><img src="./img/MyUFO_Alien/mouth1_option.png" alt=""></li>
									<li @click="MyCharacter_mouth = 2"><img src="./img/MyUFO_Alien/mouth2_option.png" alt=""></li>
									<li @click="MyCharacter_mouth = 3"><img src="./img/MyUFO_Alien/mouth3_option.png" alt=""></li>
								</ul>
								<ul class="alienMouth">
									<li @click="MyCharacter_mouth = 4"><img src="./img/MyUFO_Alien/mouth4_option.png" alt=""></li>
									<li @click="MyCharacter_mouth = 5"><img src="./img/MyUFO_Alien/mouth5_option.png" alt=""></li>
									<li @click="MyCharacter_mouth = 6"><img src="./img/MyUFO_Alien/mouth6_option.png" alt=""></li>
								</ul>
							</div>
						</div>
					</div>
          			<!-- RWD 的 button -->
					<div class="btn getCharacterBtn">
						<!-- <button onclick="screenshot()"> -->
            <button >
							<a href="/myUFO_wardrobe.html" onclick="screenshot()">
								<input type="" value="送出" class="btn_submit getMyCharacter" disabled: disabled />
							</a>
						<button>	
					</div>	
				</div>
			</div>
		</div>
	</div>

	@@include('layout/footer.html')
  <!-- @@include('layout/searchVue.html') -->

	<script>
    
		new Vue({
			el: '.MyCharacter',
			data: {
				// 選取物件
				MyCharacter_body: 1,
				MyCharacter_eye: 1,
				MyCharacter_mouth: 1,
				// 頁籤切換
				getCharacter_choiceList: 1,
				//加上class
				selected: 1,
			},
		});

  $.ajax({
        type :"GET",//呼叫模式
        url  : "./php/Backend/API/storeList.php",//呼叫的網址
        dataType: "json",//回傳的資料型態
        success : function(data) {
          for(var i=0 ;i<4;++i)
          {
            var ran=Math.floor(Math.random()*data.length);
            console.log(i,ran);
            console.log("/dist/img/upload/food/"+data[ran].menu_img);
            $('#slideshow .slide:eq('+i+') img').attr("src","/dist/img/upload/food/"+data[ran].menu_img);     
          }
        }
    })
    function screenshot(){

    html2canvas(document.getElementById('MyCharacter_canvas'))
    .then(function(canvas) {
      let a = canvas.toDataURL();
      let storage = localStorage;
      storage.clear();
      storage.setItem(`KEY ${1}`,`${a}`);
      console.log(a);
      location.href="./myUFO_wardrobe.html"

      // 下載圖片
      // var a = document.createElement('a');
      // a.href = canvas.toDataURL("image/jpeg").replace("image/jpeg", "image/octet-stream");
      // a.download = 'image.jpg';
      // a.click();
    });
  }
 
	</script>

	<script src="./js/myUFO.js"></script>
</body>

</html>

